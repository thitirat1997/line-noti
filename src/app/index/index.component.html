<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Line Notify</title>
<!-- Integrating the LIFF SDK with the LIFF app 
        Specify the CDN path 
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
-->
</head>
<body>
    <img id = "pictureUrl">
    <p id = displayName>
    
    </p>
    <p id = "statusMsg">
        <b>
            StatusMessage :
        </b>
    </p>
    <button id = "btnLogin" onclick="logOut()"> Log Out</button>

    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        async function main(){
            await liff.init({ liffId: "1656245031-Y41Ab4oV" });
            if(liff.isLoggedId()){
                getUserProfile()
            }else{
                liff.login({ redirectUri: "https://thitirat1997.github.io/project-line-liff/index"});
            }
        }
        main();

        async function getUserProfile(){
            const profile = await liff.getProfile();
            document.getElementById("pictureUrl").src = profile.pictureUrl
            document.getElementById("displayName").append = (profile.displayName);
            document.getElementById("statusMsg").append = (profile.statusMsg);
        }
        function logOut(){
            liff.logOut()
            window.Location.reload()
        }
        
    </script>
</body>
</html>